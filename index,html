<!DOCTYPE html>
<html>
<head>
<title>Professional Multi-Section Quiz</title>
<style>

body {
font-family: Arial;
margin:0;
background:#f2f2f2;
}

.container {
display:flex;
height:100vh;
}

.question-area {
flex:3;
padding:20px;
overflow-y:auto;
background:white;
}

.option {
margin:8px 0;
padding:10px;
border:1px solid #ccc;
border-radius:5px;
cursor:pointer;
}

.option.correct { background:#c8f7c5; }
.option.wrong { background:#f7c5c5; }

button {
margin:5px;
padding:8px 15px;
cursor:pointer;
}

.restart-btn {
background:#ff9800;
color:white;
border:none;
}

.nav-area {
flex:1;
background:#222;
color:white;
padding:15px;
position:fixed;
right:0;
top:0;
height:100%;
overflow-y:auto;
width:260px;
}

.summary {
margin-bottom:15px;
}

.nav-grid {
display:flex;
flex-wrap:wrap;
gap:5px;
}

.nav-btn {
width:35px;
height:35px;
border:none;
cursor:pointer;
background:#555;
color:white;
}

.nav-btn.current { background:#1e90ff; }
.nav-btn.answered { background:#28a745; }
.nav-btn.notanswered { background:#dc3545; }

select {
padding:6px;
margin-bottom:15px;
}

</style>
</head>
<body>

<div class="container">

<div class="question-area" style="margin-right:260px;">

<h2>CLASSICAL DANCE MCQ Quiz</h2>

<label><b>Select Section:</b></label>
<select id="sectionSelect"></select>

<div id="progress"></div>
<div id="question"></div>
<div id="options"></div>

<button onclick="prevQuestion()">Previous</button>
<button onclick="nextQuestion()">Next</button>
<button onclick="showResult()">Submit</button>
<button class="restart-btn" onclick="restartSection()">Restart Section</button>

<div id="explanation"></div>
<div id="result"></div>

</div>

<div class="nav-area">

<h3>Question Palette</h3>

<div class="summary">
Answered: <span id="answeredCount">0</span><br>
Not Answered: <span id="notAnsweredCount">0</span><br>
Not Visited: <span id="notVisitedCount">0</span>
</div>

<div class="nav-grid" id="navPanel"></div>

</div>

</div>

<script>

// =============================
// SECTION CONFIGURATION
// shuffleQuestions: true / false
// =============================
const allSections = {

"Rasas Section": {
shuffleQuestions: true,
questions: [
{
question: "How many Rasas are recognized in classical dances of India? / இந்திய பாரம்பரிய நடனங்களில் எத்தனை ரசங்கள் அங்கீகரிக்கப்பட்டுள்ளன?",
options: ["7","8","9","10"],
correctAnswer: "9",
explanation: "There are nine Rasas recognized by the Ministry of Culture. / கலாச்சார அமைச்சகம் ஒன்பது ரசங்களை அங்கீகரித்துள்ளது."
},
{
question: "Which Rasa represents Love? / அன்பை குறிக்கும் ரசம் எது?",
options: ["Karuna","Shringar","Veer","Shanta"],
correctAnswer: "Shringar",
explanation: "Shringar Rasa represents Love. / ஸ்ரிஙார ரசம் அன்பை குறிக்கிறது."
},
{
question: "Hasya Rasa denotes which emotion? / ஹாஸ்ய ரசம் எந்த உணர்வைக் குறிக்கிறது?",
options: ["Anger","Humorous","Fear","Peace"],
correctAnswer: "Humorous",
explanation: "Hasya Rasa represents humour or laughter. / ஹாஸ்ய ரசம் நகைச்சுவையை குறிக்கிறது."
},
{
question: "Karuna Rasa is associated with which feeling? / கருணா ரசம் எந்த உணர்வுடன் தொடர்புடையது?",
options: ["Heroism","Sorrow","Disgust","Wonder"],
correctAnswer: "Sorrow",
explanation: "Karuna Rasa represents sorrow or sadness. / கருணா ரசம் துக்கத்தை குறிக்கிறது."
},
{
question: "Which Rasa expresses Anger? / கோபத்தை வெளிப்படுத்தும் ரசம் எது?",
options: ["Raudra","Veer","Bhayanak","Adbhoot"],
correctAnswer: "Raudra",
explanation: "Raudra Rasa represents anger. / ரௌத்ர ரசம் கோபத்தை குறிக்கிறது."
},
{
question: "Veer Rasa symbolizes what? / வீர ரசம் எதை குறிக்கிறது?",
options: ["Fear","Peace","Heroism","Love"],
correctAnswer: "Heroism",
explanation: "Veer Rasa represents heroism and courage. / வீர ரசம் தைரியம் மற்றும் வீரத்தை குறிக்கிறது."
},
{
question: "Bhayanak Rasa is related to which emotion? / பயானக ரசம் எந்த உணர்வை குறிக்கிறது?",
options: ["Fear","Disgust","Wonder","Humour"],
correctAnswer: "Fear",
explanation: "Bhayanak Rasa represents fear. / பயானக ரசம் பயத்தை குறிக்கிறது."
},
{
question: "Bibhats Rasa denotes which feeling? / பிபத்ஸ் ரசம் எந்த உணர்வை குறிக்கிறது?",
options: ["Disgust","Love","Peace","Heroism"],
correctAnswer: "Disgust",
explanation: "Bibhats Rasa represents disgust. / பிபத்ஸ் ரசம் அருவருப்பை குறிக்கிறது."
},
{
question: "Adbhoot Rasa is associated with which emotion? / அத்பூத் ரசம் எந்த உணர்வுடன் தொடர்புடையது?",
options: ["Sorrow","Wonder","Anger","Peace"],
correctAnswer: "Wonder",
explanation: "Adbhoot Rasa represents wonder or amazement. / அத்பூத் ரசம் ஆச்சரியத்தை குறிக்கிறது."
},
{
question: "Which Rasa represents Peace? / அமைதியை குறிக்கும் ரசம் எது?",
options: ["Shanta","Shringar","Raudra","Veer"],
correctAnswer: "Shanta",
explanation: "Shanta Rasa represents peace and calmness. / சாந்த ரசம் அமைதி மற்றும் சமாதானத்தை குறிக்கிறது."
}
]
},

"Classical Dance States": {
shuffleQuestions: true,
questions: [
{
question: "Which organisation recognised 8 classical dances of India? / இந்தியாவின் 8 பாரம்பரிய நடனங்களை எந்த அமைப்பு அங்கீகரித்தது?",
options: ["Sahitya Akademi","Sangeet Natak Akademi","Lalit Kala Akademi","IGNCA"],
correctAnswer: "Sangeet Natak Akademi",
explanation: "Sangeet Natak Akademi recognised 8 classical dances of India. / சங்கீத நாடக அகாடமி இந்தியாவின் 8 பாரம்பரிய நடனங்களை அங்கீகரித்துள்ளது."
},
{
question: "Bharatanatyam is the classical dance of which state? / பாரதநாட்டியம் எந்த மாநிலத்தின் பாரம்பரிய நடனம்?",
options: ["Kerala","Tamil Nadu","Odisha","Assam"],
correctAnswer: "Tamil Nadu",
explanation: "Bharatanatyam belongs to Tamil Nadu. / பாரதநாட்டியம் தமிழ்நாட்டைச் சேர்ந்தது."
},
{
question: "Kathak originated in which state? / கதக் எந்த மாநிலத்தில் தோன்றியது?",
options: ["Uttar Pradesh","Manipur","Andhra Pradesh","Kerala"],
correctAnswer: "Uttar Pradesh",
explanation: "Kathak is the classical dance of Uttar Pradesh. / கதக் உத்தரப் பிரதேசத்தின் பாரம்பரிய நடனம் ஆகும்."
},
{
question: "Which two classical dances belong to Kerala? / கேரளாவைச் சேர்ந்த இரண்டு பாரம்பரிய நடனங்கள் எவை?",
options: ["Kathak & Odissi","Kathakali & Mohiniyattam","Manipuri & Sattriya","Kuchipudi & Bharatanatyam"],
correctAnswer: "Kathakali & Mohiniyattam",
explanation: "Kathakali and Mohiniyattam are from Kerala. / கதகளி மற்றும் மோகினியாட்டம் கேரளாவைச் சேர்ந்தவை."
},
{
question: "Kuchipudi is associated with which state? / குசிப்புடி எந்த மாநிலத்துடன் தொடர்புடையது?",
options: ["Odisha","Andhra Pradesh","Assam","Tamil Nadu"],
correctAnswer: "Andhra Pradesh",
explanation: "Kuchipudi belongs to Andhra Pradesh. / குசிப்புடி ஆந்திரப் பிரதேசத்தைச் சேர்ந்தது."
},
{
question: "Manipuri dance form belongs to which state? / மணிப்பூரி நடனம் எந்த மாநிலத்தைச் சேர்ந்தது?",
options: ["Manipur","Kerala","Odisha","Uttar Pradesh"],
correctAnswer: "Manipur",
explanation: "Manipuri is the classical dance of Manipur. / மணிப்பூரி மணிப்பூரின் பாரம்பரிய நடனம் ஆகும்."
},
{
question: "Odissi is the classical dance of which state? / ஒடிசி எந்த மாநிலத்தின் பாரம்பரிய நடனம்?",
options: ["Assam","Odisha","Kerala","Tamil Nadu"],
correctAnswer: "Odisha",
explanation: "Odissi belongs to Odisha. / ஒடிசி ஒடிசா மாநிலத்தின் பாரம்பரிய நடனம் ஆகும்."
},
{
question: "Sattriya classical dance belongs to which state? / சத்திரியா நடனம் எந்த மாநிலத்தைச் சேர்ந்தது?",
options: ["Assam","Manipur","Kerala","Uttar Pradesh"],
correctAnswer: "Assam",
explanation: "Sattriya is the classical dance of Assam. / சத்திரியா அசாம் மாநிலத்தின் பாரம்பரிய நடனம் ஆகும்."
}
]
},

"BHARATHANATIYAM Section": {
shuffleQuestions: true,
questions: [
{
question: "Bharatanatyam was formerly known as what? / பாரதநாட்டியம் முன்பு எந்த பெயரில் அறியப்பட்டது?",
options: ["Dasiattam","Sadir Attam","Natya","Ekaharya"],
correctAnswer: "Sadir Attam",
explanation: "Bharatanatyam was formerly known as Sadir Attam. / பாரதநாட்டியம் முன்பு சதிர் அட்டம் என அழைக்கப்பட்டது."
},
{
question: "Bharatanatyam expresses which religious philosophy? / பாரதநாட்டியம் எந்த சமயத் தத்துவத்தை வெளிப்படுத்துகிறது?",
options: ["Vaishnavism","Shaivism","Buddhism","Jainism"],
correctAnswer: "Shaivism",
explanation: "It expresses South Indian religious themes and spiritual ideas of Shaivism. / இது சைவ சமயத்தின் ஆன்மிகக் கருத்துகளை வெளிப்படுத்துகிறது."
},
{
question: "Who coined the term 'Bharatanatyam' for Sadir dance? / 'சதிர்' நடனத்திற்கு 'பாரதநாட்டியம்' என்ற பெயரை வழங்கியவர் யார்?",
options: ["Rukmini Devi","Krishna Iyer","Balasaraswati","Tagore"],
correctAnswer: "Krishna Iyer",
explanation: "Krishna Iyer first coined the term Bharatanatyam. / கிருஷ்ண ஐயர் 'பாரதநாட்டியம்' என்ற பெயரை வழங்கினார்."
},
{
question: "Bharatanatyam evolved from which concept? / பாரதநாட்டியம் எந்த முறையிலிருந்து வளர்ச்சி பெற்றது?",
options: ["Natya Shastra","Ekaharya","Tarana","Bhajan"],
correctAnswer: "Ekaharya",
explanation: "It evolved from ekaharya where one dancer performs many roles. / ஒரே கலைஞர் பல வேடங்களில் நடிக்கும் ஏகஹார்யா முறையிலிருந்து உருவானது."
},
{
question: "Bharatanatyam emerged in which place? / பாரதநாட்டியம் எங்கு தோன்றியது?",
options: ["Royal courts","Temples of South India","Villages","Modern theatres"],
correctAnswer: "Temples of South India",
explanation: "It emerged in the temples of South India. / தென் இந்திய கோவில்களில் தோன்றியது."
},
{
question: "Bharatanatyam was traditionally performed by whom? / பாரதநாட்டியம் பாரம்பரியமாக யாரால் ஆடப்பட்டது?",
options: ["Kings","Devdassis","Soldiers","Poets"],
correctAnswer: "Devdassis",
explanation: "It was performed by Devdassis and also known as Dasiattam. / தேவதாசிகளால் ஆடப்பட்டதால் தாசியாட்டம் என்றும் அழைக்கப்பட்டது."
},
{
question: "Bharatanatyam encompasses which four elements? / பாரதநாட்டியம் எந்த நான்கு கூறுகளை உள்ளடக்கியது?",
options: ["Bhav, Rag, Ras, Taal","Shringar, Veer, Hasya, Karuna","Nritta, Natya, Nritya, Tala","Padam, Varnam, Tillana, Shabdam"],
correctAnswer: "Bhav, Rag, Ras, Taal",
explanation: "It includes Bhav, Rag, Ras and Taal. / இதில் பாவம், ராகம், ரசம் மற்றும் தாளம் அடங்கும்."
},
{
question: "Which are the three important features of Bharatanatyam? / பாரதநாட்டியத்தின் மூன்று முக்கிய அம்சங்கள் எவை?",
options: ["Nritta, Natya, Nritya","Padam, Varnam, Tillana","Bhav, Ras, Taal","Alarippu, Shabdam, Jathiswaram"],
correctAnswer: "Nritta, Natya, Nritya",
explanation: "The three features are Nritta (pure dance), Natya (dramatic dance) and Nritya (expressional dance). / நிருத்தம், நாட்டியம் மற்றும் நிருத்தியம் ஆகியவை மூன்று அம்சங்கள்."
},
{
question: "How many portions are there in Bharatanatyam performance? / பாரதநாட்டிய நிகழ்ச்சியில் எத்தனை பகுதிகள் உள்ளன?",
options: ["4","5","6","7"],
correctAnswer: "6",
explanation: "It consists of six portions. / இதில் ஆறு பகுதிகள் உள்ளன."
},
{
question: "Which portion is the invocation part? / தொடக்க வணக்கமாக அமைந்த பகுதி எது?",
options: ["Varnam","Padam","Alarippu","Tillana"],
correctAnswer: "Alarippu",
explanation: "Alarippu is the invocation part. / அலரிப்பு தொடக்க வணக்கமாகும்."
},
{
question: "Jathiswaram mainly belongs to which type? / ஜதிஸ்வரம் எந்த வகையைச் சேர்ந்தது?",
options: ["Natya","Nritya","Nritta","Bhajan"],
correctAnswer: "Nritta",
explanation: "Jathiswaram is the Nritta (pure dance) part. / ஜதிஸ்வரம் நிருத்த பகுதி ஆகும்."
},
{
question: "Which portion includes short compositions with words? / குறுகிய சொற்களுடன் கூடிய பகுதி எது?",
options: ["Shabdam","Varnam","Tillana","Padam"],
correctAnswer: "Shabdam",
explanation: "Shabdam contains short compositions with words. / சப்தம் குறுகிய சொற்களுடன் கூடிய பகுதி."
},
{
question: "Which portion tells a story combining Nritta and Nritya? / நிருத்தம் மற்றும் நிருத்தியம் இணைந்து கதை சொல்லும் பகுதி எது?",
options: ["Padam","Varnam","Alarippu","Tillana"],
correctAnswer: "Varnam",
explanation: "Varnam includes both Nritta and Nritya in storytelling form. / வர்ணம் கதை வடிவில் நிருத்தம் மற்றும் நிருத்தியத்தை இணைக்கிறது."
},
{
question: "Padam mainly represents what? / பதம் முக்கியமாக எதை குறிக்கிறது?",
options: ["War dance","Religious prayer and Bhajan","Pure dance","Instrumental music"],
correctAnswer: "Religious prayer and Bhajan",
explanation: "Padam includes religious prayer, Bhajan and Keerthanam. / பதம் மதப் பிரார்த்தனை, பஜன் மற்றும் கீர்த்தனம் ஆகியவற்றை கொண்டுள்ளது."
},
{
question: "Tillana originated from which music form? / தில்லானா எந்த இசை வடிவிலிருந்து தோன்றியது?",
options: ["Carnatic Kriti","Bhajan","Tarana of Hindustani Music","Varnam"],
correctAnswer: "Tarana of Hindustani Music",
explanation: "Tillana originated from the Tarana of Hindustani Music. / தில்லானா இந்துஸ்தானி இசையின் தரானாவில் இருந்து தோன்றியது."
},
{
question: "Which tool is used by a Bharatanatyam artist to convey emotions? / பாரதநாட்டியக் கலைஞர் உணர்வுகளை வெளிப்படுத்த எந்த கருவியை பயன்படுத்துகிறார்?",
options: ["Mudra","Abhinaya","Taal","Raga"],
correctAnswer: "Abhinaya",
explanation: "Abhinaya is used to convey ideas and evoke emotions. / அபிநயம் கருத்துகளை வெளிப்படுத்தவும் உணர்வுகளை தூண்டவும் பயன்படுகிறது."
},
{
question: "How many types of Abhinaya are there? / அபிநயத்தின் எத்தனை வகைகள் உள்ளன?",
options: ["2","3","4","5"],
correctAnswer: "4",
explanation: "Abhinaya is classified into four types. / அபிநயம் நான்கு வகைகளாக வகைப்படுத்தப்படுகிறது."
},
{
question: "Which type of Abhinaya expresses the state of mind of the character? / கதாபாத்திரத்தின் மனநிலையை வெளிப்படுத்தும் அபிநயம் எது?",
options: ["Angika","Vachika","Satvika","Aharya"],
correctAnswer: "Satvika",
explanation: "Satvika Abhinaya expresses emotions by evoking the state of mind. / சாத்விக அபிநயம் மனநிலையை வெளிப்படுத்துகிறது."
},
{
question: "Angika Abhinaya uses which medium of expression? / அங்கிக அபிநயம் எந்த முறையில் வெளிப்படுத்தப்படுகிறது?",
options: ["Speech","Costume","Body movements","Music only"],
correctAnswer: "Body movements",
explanation: "Angika Abhinaya uses movements of hands, legs and limbs. / அங்கிக அபிநயம் உடல் அசைவுகள் மூலம் வெளிப்படுகிறது."
},
{
question: "Vachika Abhinaya is expressed through what? / வாசிக அபிநயம் எதன் மூலம் வெளிப்படுகிறது?",
options: ["Make-up","Speech, songs and dialogues","Hand gestures","Facial expression only"],
correctAnswer: "Speech, songs and dialogues",
explanation: "Vachika Abhinaya uses speech, music and dialogues. / வாசிக அபிநயம் சொல், பாடல் மற்றும் உரையாடல் மூலம் வெளிப்படுகிறது."
},
{
question: "Aharya Abhinaya relates to which aspect? / ஆஹார்ய அபிநயம் எதனை குறிக்கிறது?",
options: ["Mental state","Body movement","Decorations like costume and jewellery","Voice modulation"],
correctAnswer: "Decorations like costume and jewellery",
explanation: "Aharya Abhinaya uses costumes, jewellery and make-up. / ஆஹார்ய அபிநயம் உடை, நகை மற்றும் அலங்காரங்கள் மூலம் வெளிப்படுகிறது."
},
{
question: "Different styles of Bharatanatyam are known as what? / பாரதநாட்டியத்தின் பல்வேறு பாணிகள் எவ்வாறு அழைக்கப்படுகின்றன?",
options: ["Rasas","Banis","Talas","Varnams"],
correctAnswer: "Banis",
explanation: "The different styles of Bharatanatyam are called Banis. / பாரதநாட்டிய பாணிகள் 'பாணி' என அழைக்கப்படுகின்றன."
},
{
question: "Tanjavur style is associated with which famous Nattuvanar? / தஞ்சாவூர் பாணி எந்த பிரபல நட்டுவனாருடன் தொடர்புடையது?",
options: ["Minakshisundaram Pillai","Kandappa Pillai","Ramiah Pillai","Mangudi Doirairaja Iyer"],
correctAnswer: "Kandappa Pillai",
explanation: "Kandappa Pillai was a famous Nattuvanar of the Tanjavur style. / கந்தப்ப பிள்ளை தஞ்சாவூர் பாணியின் பிரபல நட்டுவனார் ஆவார்."
},
{
question: "Pandanallur style is attributed to whom? / பாண்டனல்லூர் பாணி யாருக்கு சொந்தமானது?",
options: ["Ramiah Pillai","Rukmini Devi","Minakshisundaram Pillai","Kandappa Pillai"],
correctAnswer: "Minakshisundaram Pillai",
explanation: "Pandanallur style is attributed to Minakshisundaram Pillai. / பாண்டனல்லூர் பாணி மீனாட்சிசுந்தரம் பிள்ளைக்கு உரியது."
},
{
question: "Vazhavur style was created by whom? / வழுவூர் பாணியை உருவாக்கியவர் யார்?",
options: ["Ramiah Pillai","Mangudi Iyer","Kannuswami Pillai","Rukmini Devi"],
correctAnswer: "Ramiah Pillai",
explanation: "Vazhavur style was created by Ramiah Pillai of Vazhuvoor. / வழுவூர் பாணியை ராமையா பிள்ளை உருவாக்கினார்."
},
{
question: "Kalakshetra style is credited to which renowned Bharatanatyam exponent? / கலாக்ஷேத்திர பாணி எந்த பிரபல பாரதநாட்டிய கலைஞருக்கு உரியது?",
options: ["Rukmini Devi Arundale","Balasaraswati","Ramiah Pillai","Kandappa Pillai"],
correctAnswer: "Rukmini Devi Arundale",
explanation: "Kalakshetra style is credited to Rukmini Devi Arundale. / கலாக்ஷேத்திர பாணி ருக்மிணி தேவி அருண்டேலுக்கு உரியது."
},
{
question: "Who founded the Kalakshetra Institute in Chennai? / சென்னை கலாக்ஷேத்திர நிறுவத்தை நிறுவியவர் யார்?",
options: ["Minakshisundaram Pillai","Rukmini Devi Arundale","Ramiah Pillai","Mangudi Iyer"],
correctAnswer: "Rukmini Devi Arundale",
explanation: "Rukmini Devi founded the Kalakshetra Institute in Chennai. / ருக்மிணி தேவி சென்னை கலாக்ஷேத்திர நிறுவத்தை நிறுவினார்."
},
{
question: "Mellatur style is credited to whom? / மேலட்டூர் பாணி யாருக்கு சொந்தமானது?",
options: ["Mangudi Doirairaja Iyer","Ramiah Pillai","Kandappa Pillai","Rukmini Devi"],
correctAnswer: "Mangudi Doirairaja Iyer",
explanation: "Mellatur style is credited to Mangudi Doirairaja Iyer. / மேலட்டூர் பாணி மங்குடி துரைராஜ ஐயருக்கு உரியது."
},
{
question: "Mellatur style is known for what special feature? / மேலட்டூர் பாணி எந்த சிறப்பிற்காக அறியப்படுகிறது?",
options: ["Strong footwork","Soft footwork and emphasis on Sringara Rasa","Fast movements","Use of dialogue"],
correctAnswer: "Soft footwork and emphasis on Sringara Rasa",
explanation: "Mellatur style is known for soft footwork and focus on Sringara Rasa. / மேலட்டூர் பாணி மென்மையான காலடி அசைவுகளும் ஸ்ரிஙார ரசம் மீதான முக்கியத்துவத்தாலும் அறியப்படுகிறது."
}
]
},
"Kuchipudi Section": {
shuffleQuestions: true,
questions: [
{
question: "kuchi was formerly known as what?",
options: ["Dasiattam","Sadir Attam","Natya","Ekaharya"],
correctAnswer: "Sadir Attam",
explanation: "It was known as Sadir Attam."
},
{
question: "Bharatanatyam emerged in which place?",
options: ["Royal courts","Temples of South India","Villages","Modern theatres"],
correctAnswer: "Temples of South India",
explanation: "It emerged in South Indian temples."
}
]
},

"General Section": {
shuffleQuestions: false,
questions: [
{
question: "Which organisation recognised 8 classical dances?",
options: ["Sahitya Akademi","Sangeet Natak Akademi","IGNCA","Lalit Kala Akademi"],
correctAnswer: "Sangeet Natak Akademi",
explanation: "Recognised by Sangeet Natak Akademi."
},
{
question: "Sattriya classical dance belongs to which state?",
options: ["Assam","Kerala","Tamil Nadu","Odisha"],
correctAnswer: "Assam",
explanation: "Sattriya belongs to Assam."
}
]
}

};

// =============================
let quizData = [];
let current = 0;
let answers = [];
let visited = [];
let currentSection = "";

// =============================
function shuffleArray(array){
for(let i = array.length - 1; i > 0; i--){
let j = Math.floor(Math.random() * (i + 1));
[array[i], array[j]] = [array[j], array[i]];
}
return array;
}

// =============================
function loadSection(sectionName){

currentSection = sectionName;

let section = allSections[sectionName];

quizData = JSON.parse(JSON.stringify(section.questions));

if(section.shuffleQuestions){
shuffleArray(quizData);
}

quizData.forEach(q => shuffleArray(q.options));

current = 0;
answers = new Array(quizData.length).fill(null);
visited = new Array(quizData.length).fill(false);

document.getElementById("result").innerHTML = "";

loadQuestion();
}

// =============================
function restartSection(){
loadSection(currentSection);
}

// =============================
function loadQuestion(){

visited[current] = true;

let q = quizData[current];

document.getElementById("progress").innerText =
"Question " + (current+1) + " of " + quizData.length;

document.getElementById("question").innerText = q.question;

let html = "";

for(let i=0;i<q.options.length;i++){

let className = "option";

if(answers[current] !== null){
if(q.options[i] === q.correctAnswer)
className += " correct";
else if(i === answers[current])
className += " wrong";
}

html += '<div class="'+className+'" onclick="selectAnswer('+i+')">'+q.options[i]+'</div>';
}

document.getElementById("options").innerHTML = html;

if(answers[current] !== null){
document.getElementById("explanation").innerHTML =
"<b>Explanation:</b> " + q.explanation;
}else{
document.getElementById("explanation").innerHTML = "";
}

loadNavigation();
updateSummary();
}

function selectAnswer(index){
answers[current] = index;
loadQuestion();
}

function nextQuestion(){
if(current < quizData.length-1){
current++;
loadQuestion();
}
}

function prevQuestion(){
if(current > 0){
current--;
loadQuestion();
}
}

function goToQuestion(i){
current = i;
loadQuestion();
}

function loadNavigation(){

let navHTML = "";

for(let i=0;i<quizData.length;i++){

let className = "nav-btn";

if(i === current) className += " current";
else if(answers[i] !== null) className += " answered";
else if(visited[i]) className += " notanswered";

navHTML += '<button class="'+className+'" onclick="goToQuestion('+i+')">'+(i+1)+'</button>';
}

document.getElementById("navPanel").innerHTML = navHTML;
}

function updateSummary(){

let answered = answers.filter(a=>a!==null).length;
let notVisited = visited.filter(v=>v===false).length;
let notAnswered = quizData.length - answered - notVisited;

document.getElementById("answeredCount").innerText = answered;
document.getElementById("notAnsweredCount").innerText = notAnswered;
document.getElementById("notVisitedCount").innerText = notVisited;
}

function showResult(){

let score = 0;

for(let i=0;i<quizData.length;i++){
if(quizData[i].options[answers[i]] === quizData[i].correctAnswer){
score++;
}
}

document.getElementById("result").innerHTML =
"<h3>Your Score: "+score+" / "+quizData.length+"</h3>";
}

// =============================
window.onload = function(){

let select = document.getElementById("sectionSelect");

for(let section in allSections){
let option = document.createElement("option");
option.value = section;
option.text = section;
select.appendChild(option);
}

select.onchange = function(){
loadSection(this.value);
};

loadSection(Object.keys(allSections)[0]);
};

</script>

</body>
</html>
